# game_platform

-----
### 项目名称
游戏对战平台

-----
### 项目描述
利用tcp/ip协议、udp协议实现网络游戏对战、以及简单的通信

-----
### 项目实现

- 协议（h.type）说明：
1. 1001：注册协议
2. 1002：登录协议
3. 1004：世界聊天
4. 1005：游戏协议
5. 1006：查询协议
6. 1007：查看所有在线用户协议
7. 1008：心跳包协议
8. 1009：加分协议

-----		
#### 服务器端

0. 创建所有用户信息链表，创建在线用户信息链表
1. 创建套接字、绑定、监听
2. 开启心跳检测线程；
3. 创建一个efd（epoll_creat），添加监听套接字sfd并添加监听事件EPOLLIN到efd中（epoll_ctl）
4. 创建一个while（1）循环，epoll_wait来检测监听套接字事件,当有新的事件发生时,遍历时间结构体数组：
- 如果是监听套接字sfd(evs[i].data.fd)发生变化，则是有新客户端请求链接，接收新的客户端链接,添加新的套接字cfd、ip、端口号、协议族到在	     线链表   中,并将存放到添加到efd中监听事件
- 如果是cfd有可读事件，事件结构体数组中找到该事件的cfd（evs[i]），并执行解析：

-----
#### 客户端

1. 创建tcp套接字，绑定、链接
   创建udp套接字，绑定
2. 开辟线程向服务器发送心跳包
3. 进入主菜单选项：














